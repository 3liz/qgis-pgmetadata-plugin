{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"PgMetadata # This projects aims to store some metadata for PostgreSQL layers inside a PostgreSQL database. Some key features for final users : a locator to easy search and add layers a dock to display metadata some exports to PDF, HTML DCAT, CSV Some features for the GIS administrator : A QGIS project designed to manage the metadata Customization of the HTML template","title":"Home"},{"location":"#pgmetadata","text":"This projects aims to store some metadata for PostgreSQL layers inside a PostgreSQL database. Some key features for final users : a locator to easy search and add layers a dock to display metadata some exports to PDF, HTML DCAT, CSV Some features for the GIS administrator : A QGIS project designed to manage the metadata Customization of the HTML template","title":"PgMetadata"},{"location":"changelog/","text":"CHANGELOG # 0.4.0 - 2021-01-21 # Improve documentation user guide and schemaspy Save a metadata sheet as DCAT XML Add localized glossary labels and description : it, fr, es, de Display the translated HTML in the dock when available Add data_last_update in the HTML template Add some layers in the QGIS administration project 0.3.0 - 2020-12-14 # Update online documentation Add export as PDF/HTML button in the dock 0.2.2 - 2020-11-17 # Fix locator SQL query Add themes Update of the QGIS project 0.2.1 - 2020-11-16 # Improve HTML templates for making them compatible with Lizmap SQL - Fix calculate a spatial field with Z or M geometries SQL - Fix HTML generation for fields email and size Processing - Fix upgrade algorithm and add tests Fix bug with empty links when link has no mime or type - fixes #34 SQL - Fix if the envelope is a point, or a line SQL - Add a view to query only valid dataset with the locator Fix running migrations in the Processing algorithm 0.2.0 - 2020-11-12 # Auto vacuum tables after install/upgrade of the database Add an option to auto open the dock from the locator Add a new field data_last_update Add an algorithm to set database connections for normal users Review default HTML templates Fix filter for QGS files in Processing 0.1.0 - 2020-11-03 # Automatically compute values from the table itself : feature count, CRS etc Improve QGIS form Improve the dock to display HTML metadata Use HTML templates stored in the database Display the layer geometry in the locator Add a flag to disable Processing algorithm if needed for non admin user 0.0.3 - 2020-10-20 # Add a dock displaying basic metadata information Fix file filter about QGS file selector Improve error reporting from the locator 0.0.2 - 2020-10-15 # Add French language 0.0.1 - 2020-10-14 # Provide a basic locator for adding layers Install the database schema Provide a QGIS project to edit the metadata","title":"Changelog"},{"location":"changelog/#changelog","text":"","title":"CHANGELOG"},{"location":"changelog/#040-2021-01-21","text":"Improve documentation user guide and schemaspy Save a metadata sheet as DCAT XML Add localized glossary labels and description : it, fr, es, de Display the translated HTML in the dock when available Add data_last_update in the HTML template Add some layers in the QGIS administration project","title":"0.4.0 - 2021-01-21"},{"location":"changelog/#030-2020-12-14","text":"Update online documentation Add export as PDF/HTML button in the dock","title":"0.3.0 - 2020-12-14"},{"location":"changelog/#022-2020-11-17","text":"Fix locator SQL query Add themes Update of the QGIS project","title":"0.2.2 - 2020-11-17"},{"location":"changelog/#021-2020-11-16","text":"Improve HTML templates for making them compatible with Lizmap SQL - Fix calculate a spatial field with Z or M geometries SQL - Fix HTML generation for fields email and size Processing - Fix upgrade algorithm and add tests Fix bug with empty links when link has no mime or type - fixes #34 SQL - Fix if the envelope is a point, or a line SQL - Add a view to query only valid dataset with the locator Fix running migrations in the Processing algorithm","title":"0.2.1 - 2020-11-16"},{"location":"changelog/#020-2020-11-12","text":"Auto vacuum tables after install/upgrade of the database Add an option to auto open the dock from the locator Add a new field data_last_update Add an algorithm to set database connections for normal users Review default HTML templates Fix filter for QGS files in Processing","title":"0.2.0 - 2020-11-12"},{"location":"changelog/#010-2020-11-03","text":"Automatically compute values from the table itself : feature count, CRS etc Improve QGIS form Improve the dock to display HTML metadata Use HTML templates stored in the database Display the layer geometry in the locator Add a flag to disable Processing algorithm if needed for non admin user","title":"0.1.0 - 2020-11-03"},{"location":"changelog/#003-2020-10-20","text":"Add a dock displaying basic metadata information Fix file filter about QGS file selector Improve error reporting from the locator","title":"0.0.3 - 2020-10-20"},{"location":"changelog/#002-2020-10-15","text":"Add French language","title":"0.0.2 - 2020-10-15"},{"location":"changelog/#001-2020-10-14","text":"Provide a basic locator for adding layers Install the database schema Provide a QGIS project to edit the metadata","title":"0.0.1 - 2020-10-14"},{"location":"lizmap/","text":"Lizmap Web Client # The metadata can be displayed in the QGIS Lizmap Web Client using the PgMetadata module . The module is also providing a DCAT catalog to be harvested.","title":"Lizmap"},{"location":"lizmap/#lizmap-web-client","text":"The metadata can be displayed in the QGIS Lizmap Web Client using the PgMetadata module . The module is also providing a DCAT catalog to be harvested.","title":"Lizmap Web Client"},{"location":"processing/","text":"Processing # Administration # Create metadata administration project # This algorithm will create a new QGIS project file for PgMetadata administration purpose. The generated QGIS project must then be opened by the administrator to create the needed metadata by using QGIS editing capabilities. CONNECTION_NAME : The database where the schema 'pgmetadata' is installed. PROJECT_FILE : The destination file where to create the QGIS project. Parameters # ID Description Type Info Required Advanced Option CONNECTION_NAME Connection to the PostgreSQL database String The database where the schema 'pgmetadata' is installed. \u2713 PROJECT_FILE QGIS project file to create FileDestination The destination file where to create the QGIS project. \u2713 Outputs # ID Description Type Info PROJECT_FILE QGIS project file to create File Set connections to databases # This algorithm will enable different databases where to look for metadata. DATABASES : PgMetadata can be installed on different databases. Parameters # ID Description Type Info Required Advanced Option DATABASES List of databases to look for metadata Enum PgMetadata can be installed on different databases. \u2713 Values: Outputs # ID Description Type Info No output Database # Installation of the database structure # When you are running the plugin for the first time on a new database, you need to install the database schema. It will erase and/or create the schema 'pgmetadata'. CONNECTION_NAME : The database where the schema 'pgmetadata' will be installed. OVERRIDE : Be careful This will remove data in the schema ! Parameters # ID Description Type Info Required Advanced Option CONNECTION_NAME Connection to the PostgreSQL database String The database where the schema 'pgmetadata' will be installed. \u2713 OVERRIDE Erase the schema pgmetadata ? Boolean Be careful This will remove data in the schema ! \u2713 Outputs # ID Description Type Info DATABASE_VERSION Database version String Recompute values in the dataset table # Recalculate spatial related fields for all dataset item CONNECTION_NAME : The database where the schema 'pgmetadata' has been installed. RESET : Be careful This will recompute default values. Parameters # ID Description Type Info Required Advanced Option CONNECTION_NAME Connection to the PostgreSQL database String The database where the schema 'pgmetadata' has been installed. \u2713 RESET Recompute values in the dataset table Boolean Be careful This will recompute default values. \u2713 Outputs # ID Description Type Info No output Reset HTML templates in the database # Reset HTML templates in the database CONNECTION_NAME : The database where the schema 'pgmetadata' has been installed. RESET : Be careful This will reset existing HTML templates ! Parameters # ID Description Type Info Required Advanced Option CONNECTION_NAME Connection to the PostgreSQL database String The database where the schema 'pgmetadata' has been installed. \u2713 RESET Reset HTML templates Boolean Be careful This will reset existing HTML templates ! \u2713 Outputs # ID Description Type Info No output Upgrade the database structure # When the plugin is upgraded, a database upgrade may be available as well. The database migration must be applied as well on the existing database. CONNECTION_NAME : The database where the schema 'pgmetadata' is installed. RUN_MIGRATIONS : For security reason, we ask that you explicitly use this checkbox. Parameters # ID Description Type Info Required Advanced Option CONNECTION_NAME Connection to the PostgreSQL database String The database where the schema 'pgmetadata' is installed. \u2713 RUN_MIGRATIONS Use this checkbox to upgrade. Boolean For security reason, we ask that you explicitly use this checkbox. \u2713 Outputs # ID Description Type Info DATABASE_VERSION Database version String","title":"Processing"},{"location":"processing/#processing","text":"","title":"Processing"},{"location":"processing/#administration","text":"","title":"Administration"},{"location":"processing/#create-metadata-administration-project","text":"This algorithm will create a new QGIS project file for PgMetadata administration purpose. The generated QGIS project must then be opened by the administrator to create the needed metadata by using QGIS editing capabilities. CONNECTION_NAME : The database where the schema 'pgmetadata' is installed. PROJECT_FILE : The destination file where to create the QGIS project.","title":"Create metadata administration project"},{"location":"processing/#parameters","text":"ID Description Type Info Required Advanced Option CONNECTION_NAME Connection to the PostgreSQL database String The database where the schema 'pgmetadata' is installed. \u2713 PROJECT_FILE QGIS project file to create FileDestination The destination file where to create the QGIS project. \u2713","title":"Parameters"},{"location":"processing/#outputs","text":"ID Description Type Info PROJECT_FILE QGIS project file to create File","title":"Outputs"},{"location":"processing/#set-connections-to-databases","text":"This algorithm will enable different databases where to look for metadata. DATABASES : PgMetadata can be installed on different databases.","title":"Set connections to databases"},{"location":"processing/#parameters_1","text":"ID Description Type Info Required Advanced Option DATABASES List of databases to look for metadata Enum PgMetadata can be installed on different databases. \u2713 Values:","title":"Parameters"},{"location":"processing/#outputs_1","text":"ID Description Type Info No output","title":"Outputs"},{"location":"processing/#database","text":"","title":"Database"},{"location":"processing/#installation-of-the-database-structure","text":"When you are running the plugin for the first time on a new database, you need to install the database schema. It will erase and/or create the schema 'pgmetadata'. CONNECTION_NAME : The database where the schema 'pgmetadata' will be installed. OVERRIDE : Be careful This will remove data in the schema !","title":"Installation of the database structure"},{"location":"processing/#parameters_2","text":"ID Description Type Info Required Advanced Option CONNECTION_NAME Connection to the PostgreSQL database String The database where the schema 'pgmetadata' will be installed. \u2713 OVERRIDE Erase the schema pgmetadata ? Boolean Be careful This will remove data in the schema ! \u2713","title":"Parameters"},{"location":"processing/#outputs_2","text":"ID Description Type Info DATABASE_VERSION Database version String","title":"Outputs"},{"location":"processing/#recompute-values-in-the-dataset-table","text":"Recalculate spatial related fields for all dataset item CONNECTION_NAME : The database where the schema 'pgmetadata' has been installed. RESET : Be careful This will recompute default values.","title":"Recompute values in the dataset table"},{"location":"processing/#parameters_3","text":"ID Description Type Info Required Advanced Option CONNECTION_NAME Connection to the PostgreSQL database String The database where the schema 'pgmetadata' has been installed. \u2713 RESET Recompute values in the dataset table Boolean Be careful This will recompute default values. \u2713","title":"Parameters"},{"location":"processing/#outputs_3","text":"ID Description Type Info No output","title":"Outputs"},{"location":"processing/#reset-html-templates-in-the-database","text":"Reset HTML templates in the database CONNECTION_NAME : The database where the schema 'pgmetadata' has been installed. RESET : Be careful This will reset existing HTML templates !","title":"Reset HTML templates in the database"},{"location":"processing/#parameters_4","text":"ID Description Type Info Required Advanced Option CONNECTION_NAME Connection to the PostgreSQL database String The database where the schema 'pgmetadata' has been installed. \u2713 RESET Reset HTML templates Boolean Be careful This will reset existing HTML templates ! \u2713","title":"Parameters"},{"location":"processing/#outputs_4","text":"ID Description Type Info No output","title":"Outputs"},{"location":"processing/#upgrade-the-database-structure","text":"When the plugin is upgraded, a database upgrade may be available as well. The database migration must be applied as well on the existing database. CONNECTION_NAME : The database where the schema 'pgmetadata' is installed. RUN_MIGRATIONS : For security reason, we ask that you explicitly use this checkbox.","title":"Upgrade the database structure"},{"location":"processing/#parameters_5","text":"ID Description Type Info Required Advanced Option CONNECTION_NAME Connection to the PostgreSQL database String The database where the schema 'pgmetadata' is installed. \u2713 RUN_MIGRATIONS Use this checkbox to upgrade. Boolean For security reason, we ask that you explicitly use this checkbox. \u2713","title":"Parameters"},{"location":"processing/#outputs_5","text":"ID Description Type Info DATABASE_VERSION Database version String","title":"Outputs"},{"location":"user-guide/end-user/","text":"For end users # Locator # Type ctrl+k in QGIS to open the locator widget. You can start type meta then you should see layers in the list. Datasource manager # This works without the plugin installed on the computer. It's native in QGIS. Panel # The PgMetadata panel can be opened. If set, the layer metadata will be displayed according to the layer selected in the legend. Export # To export metadata as PDF, HTML or DCAT, you need to select a layer in your layer tree saved in the metadata table dataset . Then in the dock you have a button to open the export menu and choose the output format. If no layer with metadata are selected, you can't click on the button of the export menu .","title":"End users"},{"location":"user-guide/end-user/#for-end-users","text":"","title":"For end users"},{"location":"user-guide/end-user/#locator","text":"Type ctrl+k in QGIS to open the locator widget. You can start type meta then you should see layers in the list.","title":"Locator"},{"location":"user-guide/end-user/#datasource-manager","text":"This works without the plugin installed on the computer. It's native in QGIS.","title":"Datasource manager"},{"location":"user-guide/end-user/#panel","text":"The PgMetadata panel can be opened. If set, the layer metadata will be displayed according to the layer selected in the legend.","title":"Panel"},{"location":"user-guide/end-user/#export","text":"To export metadata as PDF, HTML or DCAT, you need to select a layer in your layer tree saved in the metadata table dataset . Then in the dock you have a button to open the export menu and choose the output format. If no layer with metadata are selected, you can't click on the button of the export menu .","title":"Export"},{"location":"user-guide/gis-admin/","text":"For the GIS administrator # Installation # Database # The plugin is using a schema in PostgreSQL. If you just installed the plugin in a new organization, you must use the install database structure If the pgmetadata schema is already existing in your database, you may need to upgrade it after a plugin upgrade using the upgrade database structure Administration project # The GIS administrator can generate a QGIS project using create metadata project . You need to open the generated project and use the normal QGIS editing tools. In the group called Information Warnings : Orphan metadata displays table not existing in the database itself, but the metadata exists in the dataset table. Orphan tables is the reverse. It displays tables existing in the database but in the dataset table. Editing metadata # Before creating metadata for your layer/table, you need to implement some table. To edit this table you need to open the attribute table, switch on Edition mode and add a new row. Switching to edit mode: Adding a new row: Switching to the form view: You can access the form view in the bottom right corner of the attribute table. On the Theme table you can add many theme corresponding to different theme of your layers. You need to enter a code e.g. \"A01\", and a label corresponding at the name e.g. \"Naturals area\". Example adding theme: On the Contact table you can add contacts that can later be associated with your metadata layer. Example new contact: The Dataset table is the metadata table. You can add many rows and one added line corresponds to a metadata of a layer. You need to fill a row with these minimum information : Table name, Schema name, Title, Abstract, Etc Example to add a new metadata for a layer: On the second picture you can see the theme. Now you can add a contact to a dataset row with the Dataset table. You can click on a tab called contact . You need to allow edit mode in this tab because you implement another table. Example: You can add some Link to a dataset row with the Dataset table. It's same that to add a contact, you have a link tab. Don't forget to allow edit mode . Example: When you stop editing a table, don't forget to save your change with clicking on the save icon et leave the edit mode. To save: To leave the edit mode you need to click on the same button that to enter the edit mode. HTML Template # You can customize the HTML template. Use [% \"name_of_field\" %] to display a specific field, eg abstract . use [% meta_contacts %] to display all contacts related. It's using the template called contact . use [% meta_links %] to display all links related. It's using the template called link .","title":"GIS admins"},{"location":"user-guide/gis-admin/#for-the-gis-administrator","text":"","title":"For the GIS administrator"},{"location":"user-guide/gis-admin/#installation","text":"","title":"Installation"},{"location":"user-guide/gis-admin/#database","text":"The plugin is using a schema in PostgreSQL. If you just installed the plugin in a new organization, you must use the install database structure If the pgmetadata schema is already existing in your database, you may need to upgrade it after a plugin upgrade using the upgrade database structure","title":"Database"},{"location":"user-guide/gis-admin/#administration-project","text":"The GIS administrator can generate a QGIS project using create metadata project . You need to open the generated project and use the normal QGIS editing tools. In the group called Information Warnings : Orphan metadata displays table not existing in the database itself, but the metadata exists in the dataset table. Orphan tables is the reverse. It displays tables existing in the database but in the dataset table.","title":"Administration project"},{"location":"user-guide/gis-admin/#editing-metadata","text":"Before creating metadata for your layer/table, you need to implement some table. To edit this table you need to open the attribute table, switch on Edition mode and add a new row. Switching to edit mode: Adding a new row: Switching to the form view: You can access the form view in the bottom right corner of the attribute table. On the Theme table you can add many theme corresponding to different theme of your layers. You need to enter a code e.g. \"A01\", and a label corresponding at the name e.g. \"Naturals area\". Example adding theme: On the Contact table you can add contacts that can later be associated with your metadata layer. Example new contact: The Dataset table is the metadata table. You can add many rows and one added line corresponds to a metadata of a layer. You need to fill a row with these minimum information : Table name, Schema name, Title, Abstract, Etc Example to add a new metadata for a layer: On the second picture you can see the theme. Now you can add a contact to a dataset row with the Dataset table. You can click on a tab called contact . You need to allow edit mode in this tab because you implement another table. Example: You can add some Link to a dataset row with the Dataset table. It's same that to add a contact, you have a link tab. Don't forget to allow edit mode . Example: When you stop editing a table, don't forget to save your change with clicking on the save icon et leave the edit mode. To save: To leave the edit mode you need to click on the same button that to enter the edit mode.","title":"Editing metadata"},{"location":"user-guide/gis-admin/#html-template","text":"You can customize the HTML template. Use [% \"name_of_field\" %] to display a specific field, eg abstract . use [% meta_contacts %] to display all contacts related. It's using the template called contact . use [% meta_links %] to display all links related. It's using the template called link .","title":"HTML Template"},{"location":"user-guide/installation/","text":"Installation # The plugin is not yet available in the official QGIS repository, you must install it manually. Custom repository # We recommend adding the QGIS custom repository , using this URL https://github.com/3liz/qgis-pgmetadata-plugin/releases/latest/download/plugins.xml . There isn't any authentification, and you will have automatic updates later. Manual ZIP # If you don't want to set up a custom repository, you can download the ZIP file from the release page","title":"Installation"},{"location":"user-guide/installation/#installation","text":"The plugin is not yet available in the official QGIS repository, you must install it manually.","title":"Installation"},{"location":"user-guide/installation/#custom-repository","text":"We recommend adding the QGIS custom repository , using this URL https://github.com/3liz/qgis-pgmetadata-plugin/releases/latest/download/plugins.xml . There isn't any authentification, and you will have automatic updates later.","title":"Custom repository"},{"location":"user-guide/installation/#manual-zip","text":"If you don't want to set up a custom repository, you can download the ZIP file from the release page","title":"Manual ZIP"},{"location":"user-guide/sys-admin/","text":"Deploying within an organization # The system administrator can hide PgMetadata Processing algorithms from normal users by adding an environment variable QGIS_PGMETADATA_END_USER_ONLY . If this variable exists, Processing algorithms won't be displayed. It's possible to use the QGIS3.ini file instead with end_user_only . In the QGIS3.ini file within an organisation, you may want some hardcoded configuration : 1 2 3 4 5 6 7 [pgmetadata] auto_open_dock = true end_user_only = true connection_names = Connection 1;Connection 2;Connection 3 [Plugins] pg_metadata = true","title":"Sys admins"},{"location":"user-guide/sys-admin/#deploying-within-an-organization","text":"The system administrator can hide PgMetadata Processing algorithms from normal users by adding an environment variable QGIS_PGMETADATA_END_USER_ONLY . If this variable exists, Processing algorithms won't be displayed. It's possible to use the QGIS3.ini file instead with end_user_only . In the QGIS3.ini file within an organisation, you may want some hardcoded configuration : 1 2 3 4 5 6 7 [pgmetadata] auto_open_dock = true end_user_only = true connection_names = Connection 1;Connection 2;Connection 3 [Plugins] pg_metadata = true","title":"Deploying within an organization"}]}